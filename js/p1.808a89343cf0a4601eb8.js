(()=>{"use strict";let e=new Date,t=e.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});t=+t.split(":").join(".");let n=function(e){return e>=6&&e<=11.59?"morning":e>=12&&e<=17.59?"day":e>=18&&e<=23.59?"evening":e>=0&&e<=5.59&&"night"}(t);function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}let s=o(1,20),r="";r=s<10?`0${s}`:s;let c={name:"...enter your name",city:"...enter town"},a=document.querySelector(".author"),i=document.querySelector(".quote");async function u(){const e=await fetch("js/base-phases.json"),t=await e.json();let n=o(0,Object.keys(t).length);a.innerHTML=t[n].author,i.innerHTML=`" ${t[n].text} "`}const l=document.querySelector(".weather-icon"),d=document.querySelector(".temperature"),m=document.querySelector(".weather-description"),g=document.querySelector(".wind"),y=document.querySelector(".humidity");async function h(e){const t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&lang=ru&appid=6dfbd47545f720acd1a7123460a2c92d&units=metric`,n=await fetch(t),o=await n.json();l.className="weather-icon owf",l.classList.add(`owf-${o.weather[0].id}`),d.textContent=`${Math.round(o.main.temp)}°C`,m.textContent=o.weather[0].description,g.textContent=`Скорость ветра ${Math.round(o.wind.speed)} м/с`,y.textContent=`Влажность ${o.main.humidity}%`}const p=[{num:1,title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{num:2,title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"03:50"},{num:3,title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"01:37"},{num:4,title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"01:50"}];let S=document.querySelector("audio");S.src="../assets/sounds/Aqua Caelestis.mp3";let q=p[0].num-1;console.log(q);let w=document.querySelector(".play");document.querySelector(".play-next").addEventListener("click",(function(){3===q?(q=0,S.src=p[q].src,v()):(q+=1,S.src=p[q].src,v())})),document.querySelector(".play-prev").addEventListener("click",(function(){console.log(q),0===q?(q=3,S.src=p[q].src,v()):(q-=1,S.src=p[q].src,v())}));let f=document.querySelector(".play-list");function v(){!function(){document.querySelector(".play-list").querySelectorAll("li").forEach((e=>{e.style.color="white"}));let e=`${q}`;e=Number(e)+1,document.getElementById(`${e.toString()}`).style.color="red"}(),!0===S.paused?(S.currentTime=0,w.style.backgroundImage="url(../assets/svg/pause.svg)",S.play()):(S.pause(),w.style.backgroundImage="url(../assets/svg/play.svg)")}p.forEach((e=>{f.innerHTML+=`\n    <li id ="${e.num}">${e.title}</li>\n`})),f.querySelectorAll("li").forEach((e=>{e.addEventListener("click",(()=>{console.log(e.id),S.src=p[e.id-1].src,v()}))})),w.addEventListener("click",v);let b=document.querySelector(".name"),$=document.querySelector(".city"),L=document.querySelector(".change-quote"),k=document.querySelector(".slide-next"),E=document.querySelector(".slide-prev");function M(){this.value=""}function C(e,t){c[t]=e.value,localStorage.setItem("baseMoment",JSON.stringify(c))}localStorage.baseMoment&&(c=JSON.parse(localStorage.getItem("baseMoment"))),function e(){const t=document.querySelector(".time"),o=new Date;t.textContent=o.toLocaleTimeString(),setTimeout(e,1e3),document.querySelector(".greeting").innerHTML=`Good ${n}, `}(),document.querySelector(".date").innerHTML=e.toLocaleString("en-us",{weekday:"long",month:"long",day:"numeric"}),document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg')`,u(),h(c.city),c.name.trim().length<=0?b.value="...enter your name":b.value=c.name,b.addEventListener("focus",M),b.addEventListener("blur",(function(){C(b,"name")})),c.city.trim().length<=0?$.value="...enter your city":$.value=c.city,$.addEventListener("focus",M),$.addEventListener("blur",(function(){C($,"city"),0===c.city.trim().length?(console.log("clear"),l.className="weather-icon owf",d.textContent="",m.textContent="",g.textContent="",y.textContent=""):h(c.city)})),L.addEventListener("click",u),k.addEventListener("click",(()=>{!function(){r=Number(r),r+=1,20===r&&(r=1),r=r<10?`0${r}`:r;const e=new Image;e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`,e.onload=()=>{document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`}}()})),E.addEventListener("click",(()=>{!function(){r=Number(r),r-=1,1===r&&(r=20),r=r<10?`0${r}`:r;const e=new Image;e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`,e.onload=()=>{document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`}}()}))})();