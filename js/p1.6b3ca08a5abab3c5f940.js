(()=>{"use strict";let e=new Date,t=e.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});t=+t.split(":").join(".");let n=function(e){return e>=6&&e<=11.59?"morning":e>=12&&e<=17.59?"day":e>=18&&e<=23.59?"evening":e>=0&&e<=5.59&&"night"}(t);function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}let r=o(1,20),s="";s=r<10?`0${r}`:r;let c={name:"...enter your name",city:"...enter town"};function a(){localStorage.baseMoment&&(c=JSON.parse(localStorage.getItem("baseMoment")))}let u=document.querySelector(".author"),l=document.querySelector(".quote");async function i(){const e=await fetch("js/base-phases.json"),t=await e.json();let n=o(0,Object.keys(t).length);u.innerHTML=t[n].author,l.innerHTML=`" ${t[n].text} "`}const d=document.querySelector(".weather-icon"),m=document.querySelector(".temperature"),g=document.querySelector(".weather-description"),y=document.querySelector(".wind"),h=document.querySelector(".humidity");async function p(e){const t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&lang=ru&appid=6dfbd47545f720acd1a7123460a2c92d&units=metric`,n=await fetch(t),o=await n.json();d.className="weather-icon owf",d.classList.add(`owf-${o.weather[0].id}`),m.textContent=`${Math.round(o.main.temp)}°C`,g.textContent=o.weather[0].description,y.textContent=`Скорость ветра ${Math.round(o.wind.speed)} м/с`,h.textContent=`Влажность ${o.main.humidity}%`}const S=[{num:1,title:"Ночь",src:"assets/sounds/1.mp3",duration:"06:24"},{num:2,title:"Как на войне",src:"assets/sounds/2.mp3",duration:"04:05"},{num:3,title:"Под небом...",src:"assets/sounds/3.mp3",duration:"03:39"},{num:4,title:"Беспечный Ангел",src:"assets/sounds/4.mp3",duration:"03:58"}];let f=document.querySelector("audio");f.src="assets/sounds/1.mp3";let q=S[0].num-1;console.log(q);let v=document.querySelector(".play");document.querySelector(".play-next").addEventListener("click",(function(){3===q?(q=0,f.src=S[q].src,b()):(q+=1,f.src=S[q].src,b())})),document.querySelector(".play-prev").addEventListener("click",(function(){console.log(q),0===q?(q=3,f.src=S[q].src,b()):(q-=1,f.src=S[q].src,b())}));let w=document.querySelector(".play-list");function b(){$(),!0===f.paused?(f.currentTime=0,v.style.backgroundImage="url(assets/svg/pause.svg)",f.play()):(f.pause(),v.style.backgroundImage="url(assets/svg/play.svg)")}function $(){document.querySelector(".play-list").querySelectorAll("li").forEach((e=>{e.style.color="white"}));let e=`${q}`;e=Number(e)+1,document.getElementById(`${e.toString()}`).style.color="red"}S.forEach((e=>{w.innerHTML+=`\n    <li id ="${e.num}">${e.title}</li>\n`})),w.querySelectorAll("li").forEach((e=>{e.addEventListener("click",(()=>{q=e.id-1,$(),f.src=S[e.id-1].src,b()}))})),v.addEventListener("click",b);let L=document.querySelector(".name"),k=document.querySelector(".city"),E=document.querySelector(".change-quote"),M=document.querySelector(".slide-next"),x=document.querySelector(".slide-prev");function j(){this.value=""}function C(e,t){c[t]=e.value,localStorage.setItem("baseMoment",JSON.stringify(c)),a()}a(),function e(){const t=document.querySelector(".time"),o=new Date;t.textContent=o.toLocaleTimeString(),setTimeout(e,1e3),document.querySelector(".greeting").innerHTML=`Good ${n}, `}(),document.querySelector(".date").innerHTML=e.toLocaleString("en-us",{weekday:"long",month:"long",day:"numeric"}),document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${s}.jpg')`,i(),p(c.city),c.name.trim().length<=0?L.value="...enter your name":L.value=c.name,L.addEventListener("focus",j),L.addEventListener("blur",(function(){C(L,"name"),c.name.trim().length<=0?L.value="...enter your name":L.value=c.name})),c.city.trim().length<=0?k.value="...enter your city":k.value=c.city,k.addEventListener("focus",j),k.addEventListener("blur",(function(){C(k,"city"),0===c.city.trim().length?(console.log("clear"),d.className="weather-icon owf",m.textContent="",g.textContent="",y.textContent="",h.textContent=""):p(c.city),c.city.trim().length<=0?k.value="...enter your city":k.value=c.city})),E.addEventListener("click",i),M.addEventListener("click",(()=>{!function(){s=Number(s),s+=1,20===s&&(s=1),s=s<10?`0${s}`:s;const e=new Image;e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${s}.jpg`,e.onload=()=>{document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${s}.jpg`}}()})),x.addEventListener("click",(()=>{!function(){s=Number(s),s-=1,1===s&&(s=20),s=s<10?`0${s}`:s;const e=new Image;e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${s}.jpg`,e.onload=()=>{document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${s}.jpg`}}()}))})();