(()=>{"use strict";let e=new Date,t=e.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});t=+t.split(":").join(".");let n=function(e){return e>=6&&e<=11.59?"morning":e>=12&&e<=17.59?"day":e>=18&&e<=23.59?"evening":e>=0&&e<=5.59&&"night"}(t);function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}let a=o(1,20),r="";r=a<10?`0${a}`:a;let c={name:"...enter your name",city:"...enter town"},s=document.querySelector(".author"),i=document.querySelector(".quote");async function u(){const e=await fetch("js/base-phases.json"),t=await e.json();let n=o(0,Object.keys(t).length);s.innerHTML=t[n].author,i.innerHTML=`" ${t[n].text} "`}const l=document.querySelector(".weather-icon"),m=document.querySelector(".temperature"),d=document.querySelector(".weather-description"),g=document.querySelector(".wind"),h=document.querySelector(".humidity");async function y(e){const t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&lang=ru&appid=6dfbd47545f720acd1a7123460a2c92d&units=metric`,n=await fetch(t),o=await n.json();l.className="weather-icon owf",l.classList.add(`owf-${o.weather[0].id}`),m.textContent=`${Math.round(o.main.temp)}°C`,d.textContent=o.weather[0].description,g.textContent=`Скорость ветра ${Math.round(o.wind.speed)} м/с`,h.textContent=`Влажность ${o.main.humidity}%`}let p=document.querySelector(".name"),w=document.querySelector(".city"),S=document.querySelector(".change-quote"),f=document.querySelector(".slide-next"),b=document.querySelector(".slide-prev");function q(){this.value=""}function $(e,t){c[t]=e.value,localStorage.setItem("baseMoment",JSON.stringify(c))}localStorage.baseMoment&&(c=JSON.parse(localStorage.getItem("baseMoment"))),function e(){const t=document.querySelector(".time"),o=new Date;t.textContent=o.toLocaleTimeString(),setTimeout(e,1e3),document.querySelector(".greeting").innerHTML=`Good ${n}, `}(),document.querySelector(".date").innerHTML=e.toLocaleString("en-us",{weekday:"long",month:"long",day:"numeric"}),document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg')`,u(),y(c.city),c.name.trim().length<=0?p.value="...enter your name":p.value=c.name,p.addEventListener("focus",q),p.addEventListener("blur",(function(){$(p,"name")})),c.city.trim().length<=0?w.value="...enter your city":w.value=c.city,w.addEventListener("focus",q),w.addEventListener("blur",(function(){$(w,"city"),0===c.city.trim().length?(console.log("clear"),l.className="weather-icon owf",m.textContent="",d.textContent="",g.textContent="",h.textContent=""):y(c.city)})),S.addEventListener("click",u),f.addEventListener("click",(()=>{!function(){r=Number(r),r+=1,20===r&&(r=1),r=r<10?`0${r}`:r;const e=new Image;e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`,e.onload=()=>{document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`}}()})),b.addEventListener("click",(()=>{!function(){r=Number(r),r-=1,1===r&&(r=20),r=r<10?`0${r}`:r;const e=new Image;e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`,e.onload=()=>{document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`}}()}))})();