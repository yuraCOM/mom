(()=>{"use strict";let e=new Date,t=e.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});t=+t.split(":").join(".");let n=function(e){return e>=6&&e<=11.59?"morning":e>=12&&e<=17.59?"day":e>=18&&e<=23.59?"evening":e>=0&&e<=5.59&&"night"}(t);function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}let s=o(1,20),r="";r=s<10?`0${s}`:s;let c={name:"...enter your name",city:"...enter town"},a=document.querySelector(".author"),u=document.querySelector(".quote");async function i(){const e=await fetch("js/base-phases.json"),t=await e.json();let n=o(0,Object.keys(t).length);a.innerHTML=t[n].author,u.innerHTML=`" ${t[n].text} "`}const l=document.querySelector(".weather-icon"),d=document.querySelector(".temperature"),m=document.querySelector(".weather-description"),g=document.querySelector(".wind"),y=document.querySelector(".humidity");async function h(e){const t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&lang=ru&appid=6dfbd47545f720acd1a7123460a2c92d&units=metric`,n=await fetch(t),o=await n.json();l.className="weather-icon owf",l.classList.add(`owf-${o.weather[0].id}`),d.textContent=`${Math.round(o.main.temp)}°C`,m.textContent=o.weather[0].description,g.textContent=`Скорость ветра ${Math.round(o.wind.speed)} м/с`,y.textContent=`Влажность ${o.main.humidity}%`}const p=[{num:1,title:"Ночь",src:"assets/sounds/1.mp3",duration:"06:24"},{num:2,title:"Как на войне",src:"assets/sounds/2.mp3",duration:"04:05"},{num:3,title:"Под небом...",src:"assets/sounds/3.mp3",duration:"03:39"},{num:4,title:"Беспечный Ангел",src:"assets/sounds/4.mp3",duration:"03:58"}];let S=document.querySelector("audio");S.src="assets/sounds/1.mp3";let f=p[0].num-1;console.log(f);let q=document.querySelector(".play");document.querySelector(".play-next").addEventListener("click",(function(){3===f?(f=0,S.src=p[f].src,v()):(f+=1,S.src=p[f].src,v())})),document.querySelector(".play-prev").addEventListener("click",(function(){console.log(f),0===f?(f=3,S.src=p[f].src,v()):(f-=1,S.src=p[f].src,v())}));let w=document.querySelector(".play-list");function v(){b(),!0===S.paused?(S.currentTime=0,q.style.backgroundImage="url(assets/svg/pause.svg)",S.play()):(S.pause(),q.style.backgroundImage="url(assets/svg/play.svg)")}function b(){document.querySelector(".play-list").querySelectorAll("li").forEach((e=>{e.style.color="white"}));let e=`${f}`;e=Number(e)+1,document.getElementById(`${e.toString()}`).style.color="red"}p.forEach((e=>{w.innerHTML+=`\n    <li id ="${e.num}">${e.title}</li>\n`})),w.querySelectorAll("li").forEach((e=>{e.addEventListener("click",(()=>{f=e.id-1,b(),S.src=p[e.id-1].src,v()}))})),q.addEventListener("click",v);let $=document.querySelector(".name"),L=document.querySelector(".city"),k=document.querySelector(".change-quote"),E=document.querySelector(".slide-next"),M=document.querySelector(".slide-prev");function x(){this.value=""}function j(e,t){c[t]=e.value,localStorage.setItem("baseMoment",JSON.stringify(c))}localStorage.baseMoment&&(c=JSON.parse(localStorage.getItem("baseMoment"))),function e(){const t=document.querySelector(".time"),o=new Date;t.textContent=o.toLocaleTimeString(),setTimeout(e,1e3),document.querySelector(".greeting").innerHTML=`Good ${n}, `}(),document.querySelector(".date").innerHTML=e.toLocaleString("en-us",{weekday:"long",month:"long",day:"numeric"}),document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg')`,i(),h(c.city),c.name.trim().length<=0?$.value="...enter your name":$.value=c.name,$.addEventListener("focus",x),$.addEventListener("blur",(function(){j($,"name")})),c.city.trim().length<=0?L.value="...enter your city":L.value=c.city,L.addEventListener("focus",x),L.addEventListener("blur",(function(){j(L,"city"),0===c.city.trim().length?(console.log("clear"),l.className="weather-icon owf",d.textContent="",m.textContent="",g.textContent="",y.textContent=""):h(c.city)})),k.addEventListener("click",i),E.addEventListener("click",(()=>{!function(){r=Number(r),r+=1,20===r&&(r=1),r=r<10?`0${r}`:r;const e=new Image;e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`,e.onload=()=>{document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`}}()})),M.addEventListener("click",(()=>{!function(){r=Number(r),r-=1,1===r&&(r=20),r=r<10?`0${r}`:r;const e=new Image;e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`,e.onload=()=>{document.querySelector("body").style.backgroundImage=`url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${r}.jpg`}}()}))})();